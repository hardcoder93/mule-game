<!-- Ant build file by Chris Jenkins -->

<project name="M4AntLab" basedir="." default="all">
	
	<target name="init">
		<property name="src.dir"		
				  value="src"/>
		<property name="build.dir"			
				  value="build"/>
		<property name="apidoc.dir"		
				  value="apidoc"/>
		<property name="main-class"
				  value="edu.gatech.oad.antlab.pkg1.AntLabMain"/>
		<property name="library"
				  value="lib"/>
		<property name="run-jar"
				  value="${build.dir}/AntLabRun.jar"/>
				  
		<path id="classpath">
			<fileset dir="${library}" includes="resources.jar" />
		</path>
	</target>
	
	
	<target name="prepare" depends="clean">
		<mkdir dir="${apidoc.dir}"/>
		<mkdir dir="${build.dir}"/>
	</target>
	
	
	<target name="compile">
			<javac srcdir="${src.dir}"
				   destdir="${build.dir}" 
				   classpathref="classpath"
				   includeAntRuntime="no"/>	
	</target>
	
	
	<target name="javadoc">
		<javadoc sourcepath="${src.dir}"	
				 destdir="${apidoc.dir}"
				 classpathref="classpath"/>
	</target>
	
	
	<target name="jar" depends="compile">
		<jar destfile="${run-jar}"
			 basedir="${build.dir}">
			 <manifest>
			 	<attribute name="Main-Class" value="${main-class}"/>
				<attribute name="Class-Path" value="../${library}/resources.jar" />
			 </manifest>
		</jar>
	</target>
	
	
	<target name="run" depends="jar">
		<java jar="${run-jar}"
			  fork="true"/>
	</target>
	
	<target name="clean">
		<delete dir="${build.dir}"/>
		<delete dir="${apidoc.dir}"/>
		<delete file="${run-jar}"/>
	</target>
	
	<target name="all" depends="init,prepare,compile,javadoc,jar,run"/>
	
</project>